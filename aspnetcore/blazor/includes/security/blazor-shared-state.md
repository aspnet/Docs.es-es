<span data-ttu-id="beca5-101">Las aplicaciones Blazor Server residen en la memoria del servidor.</span><span class="sxs-lookup"><span data-stu-id="beca5-101">Blazor server apps live in server memory.</span></span> <span data-ttu-id="beca5-102">Eso significa que hay varias aplicaciones hospedadas dentro del mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="beca5-102">That means that there are multiple apps hosted within the same process.</span></span> <span data-ttu-id="beca5-103">En cada sesión de aplicación, Blazor inicia un circuito con su propio ámbito de contenedor de DI.</span><span class="sxs-lookup"><span data-stu-id="beca5-103">For each app session, Blazor starts a circuit with its own DI container scope.</span></span> <span data-ttu-id="beca5-104">Eso significa que los servicios con ámbito son únicos por sesión de Blazor.</span><span class="sxs-lookup"><span data-stu-id="beca5-104">That means that scoped services are unique per Blazor session.</span></span>

> [!WARNING]
> <span data-ttu-id="beca5-105">No se recomienda que las aplicaciones del mismo servidor compartan estado mediante servicios singleton, a menos que se tomen precauciones, ya que esto puede incorporar vulnerabilidades de seguridad, como la pérdida de estado de usuario entre circuitos.</span><span class="sxs-lookup"><span data-stu-id="beca5-105">We don't recommend apps on the same server share state using singleton services unless extreme care is taken, as this can introduce security vulnerabilities, such as leaking user state across circuits.</span></span>

<span data-ttu-id="beca5-106">Puede usar servicios singleton con estado en aplicaciones Blazor si están específicamente diseñadas para ello.</span><span class="sxs-lookup"><span data-stu-id="beca5-106">You can use stateful singleton services in Blazor apps if they are specifically designed for it.</span></span> <span data-ttu-id="beca5-107">Por ejemplo, es correcto usar una caché de memoria como singleton porque requiere una clave para acceder a una entrada determinada, dando por hecho que los usuarios no tienen control sobre las claves de caché que se usan.</span><span class="sxs-lookup"><span data-stu-id="beca5-107">For example, it's ok to use a memory cache as a singleton because it requires a key to access a given entry, assuming users don't have control of what cache keys are used.</span></span>

<span data-ttu-id="beca5-108">**Además, de nuevo por motivos de seguridad, no debe usar <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> en aplicaciones Blazor.**</span><span class="sxs-lookup"><span data-stu-id="beca5-108">**Additionally, again for security reasons, you must not use <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> within Blazor apps.**</span></span> <span data-ttu-id="beca5-109">Las aplicaciones de Blazor se ejecutan fuera del contexto de la canalización de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="beca5-109">Blazor apps run outside of the context of the ASP.NET Core pipeline.</span></span> <span data-ttu-id="beca5-110">No se garantiza que <xref:Microsoft.AspNetCore.Http.HttpContext> esté disponible en <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor>, ni tampoco se garantiza que contenga el contexto que inició la aplicación de Blazor.</span><span class="sxs-lookup"><span data-stu-id="beca5-110">The <xref:Microsoft.AspNetCore.Http.HttpContext> isn't guaranteed to be available within the <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor>, nor is it guaranteed to be holding the context that started the Blazor app.</span></span>

<span data-ttu-id="beca5-111">La manera recomendada de pasar el estado de la solicitud a la aplicación Blazor es por medio de parámetros al componente raíz en la representación inicial de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="beca5-111">The recommended way to pass request state to the Blazor app is through parameters to the root component in the initial rendering of the app:</span></span>

* <span data-ttu-id="beca5-112">Defina una clase con todos los datos que quiere pasar a la aplicación Blazor.</span><span class="sxs-lookup"><span data-stu-id="beca5-112">Define a class with all the data you want to pass to the Blazor app.</span></span>
* <span data-ttu-id="beca5-113">Rellene los datos de la página de Razor con el elemento <xref:Microsoft.AspNetCore.Http.HttpContext> disponible en ese momento.</span><span class="sxs-lookup"><span data-stu-id="beca5-113">Populate that data from the Razor page using the <xref:Microsoft.AspNetCore.Http.HttpContext> available at that time.</span></span>
* <span data-ttu-id="beca5-114">Pase los datos a la aplicación Blazor como parámetro al componente raíz (App).</span><span class="sxs-lookup"><span data-stu-id="beca5-114">Pass the data to the Blazor app as a parameter to the root component (App).</span></span>
* <span data-ttu-id="beca5-115">Defina un parámetro en el componente raíz para que contenga los datos que se pasan a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="beca5-115">Define a parameter in the root component to hold the data being passed to the app.</span></span>
* <span data-ttu-id="beca5-116">Use los datos específicos del usuario dentro de la aplicación; o bien, copie esos datos en un servicio con ámbito dentro de <xref:Microsoft.AspNetCore.Components.ComponentBase.OnInitializedAsync%2A> para que se puedan usar en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="beca5-116">Use the user-specific data within the app; or alternatively, copy that data into a scoped service within <xref:Microsoft.AspNetCore.Components.ComponentBase.OnInitializedAsync%2A> so that it can be used across the app.</span></span>

<span data-ttu-id="beca5-117">Para obtener más información y un código de ejemplo, vea <xref:blazor/security/server/additional-scenarios#pass-tokens-to-a-blazor-server-app>.</span><span class="sxs-lookup"><span data-stu-id="beca5-117">For more information and example code, see <xref:blazor/security/server/additional-scenarios#pass-tokens-to-a-blazor-server-app>.</span></span>
