---
title: Modelos de hospedaje Blazor en ASP.NET Core
author: guardrex
description: Obtenga información sobre los modelos de hospedaje Blazor WebAssembly y Blazor Server.
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 12/07/2020
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: blazor/hosting-models
ms.openlocfilehash: a6f1c88b8e93c0d8ccfebca482895ebab8d18a81
ms.sourcegitcommit: 3593c4efa707edeaaceffbfa544f99f41fc62535
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/04/2021
ms.locfileid: "97506921"
---
# <a name="aspnet-core-no-locblazor-hosting-models"></a><span data-ttu-id="679a8-103">Modelos de hospedaje Blazor en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="679a8-103">ASP.NET Core Blazor hosting models</span></span>

<span data-ttu-id="679a8-104">Por [Daniel Roth](https://github.com/danroth27)</span><span class="sxs-lookup"><span data-stu-id="679a8-104">By [Daniel Roth](https://github.com/danroth27)</span></span>

<span data-ttu-id="679a8-105">Blazor es un marco web diseñado para ejecutar el lado cliente en el explorador en un entorno de tiempo de ejecución de .NET basado en [WebAssembly](https://webassembly.org/) ( *Blazor WebAssembly* ) o el lado servidor en ASP.NET Core ( *Blazor Server* ).</span><span class="sxs-lookup"><span data-stu-id="679a8-105">Blazor is a web framework designed to run client-side in the browser on a [WebAssembly](https://webassembly.org/)-based .NET runtime (*Blazor WebAssembly*) or server-side in ASP.NET Core (*Blazor Server*).</span></span> <span data-ttu-id="679a8-106">Independientemente del modelo de hospedaje, los modelos de la aplicación y los componentes *son los mismos*.</span><span class="sxs-lookup"><span data-stu-id="679a8-106">Regardless of the hosting model, the app and component models *are the same*.</span></span>

## Blazor WebAssembly

<span data-ttu-id="679a8-107">El modelo de hospedaje principal de Blazor se ejecuta del lado cliente en el explorador en WebAssembly.</span><span class="sxs-lookup"><span data-stu-id="679a8-107">The primary Blazor hosting model is running client-side in the browser on WebAssembly.</span></span> <span data-ttu-id="679a8-108">La aplicación Blazor, sus dependencias y el entorno de ejecución de .NET se descargan en el explorador.</span><span class="sxs-lookup"><span data-stu-id="679a8-108">The Blazor app, its dependencies, and the .NET runtime are downloaded to the browser.</span></span> <span data-ttu-id="679a8-109">La aplicación se ejecuta directamente en el subproceso de interfaz de usuario del explorador.</span><span class="sxs-lookup"><span data-stu-id="679a8-109">The app is executed directly on the browser UI thread.</span></span> <span data-ttu-id="679a8-110">Las actualizaciones de la interfaz de usuario y el control de eventos se producen en el mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="679a8-110">UI updates and event handling occur within the same process.</span></span> <span data-ttu-id="679a8-111">Los recursos de la aplicación se implementan como archivos estáticos en un servidor o servicio web capaz de servir contenido estático a los clientes.</span><span class="sxs-lookup"><span data-stu-id="679a8-111">The app's assets are deployed as static files to a web server or service capable of serving static content to clients.</span></span>

![Blazor WebAssembly: La aplicación Blazor se ejecuta en un subproceso de interfaz de usuario dentro del explorador.](hosting-models/_static/blazor-webassembly.png)

<span data-ttu-id="679a8-113">Cuando la aplicación Blazor WebAssembly se crea para su implementación sin una aplicación de back-end ASP.NET Core, se denomina aplicación Blazor WebAssembly *independiente*.</span><span class="sxs-lookup"><span data-stu-id="679a8-113">When the Blazor WebAssembly app is created for deployment without a backend ASP.NET Core app to serve its files, the app is called a *standalone* Blazor WebAssembly app.</span></span> <span data-ttu-id="679a8-114">Cuando la aplicación se crea para su implementación con una aplicación de back-end para dar servicio a sus archivos, la aplicación se denomina aplicación Blazor WebAssembly *hospedada*.</span><span class="sxs-lookup"><span data-stu-id="679a8-114">When the app is created for deployment with a backend app to serve its files, the app is called a *hosted* Blazor WebAssembly app.</span></span> <span data-ttu-id="679a8-115">Una aplicación Blazor WebAssembly hospedada suele interactuar con el servidor a través de la red mediante llamadas API web o [SignalR](xref:signalr/introduction) (<xref:tutorials/signalr-blazor-webassembly>).</span><span class="sxs-lookup"><span data-stu-id="679a8-115">A hosted Blazor WebAssembly app typically interacts with the server over the network using web API calls or [SignalR](xref:signalr/introduction) (<xref:tutorials/signalr-blazor-webassembly>).</span></span>

<span data-ttu-id="679a8-116">El script `blazor.webassembly.js` lo proporciona el marco y controla:</span><span class="sxs-lookup"><span data-stu-id="679a8-116">The `blazor.webassembly.js` script is provided by the framework and handles:</span></span>

* <span data-ttu-id="679a8-117">La descarga del tiempo de ejecución de .NET, la aplicación y las dependencias de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="679a8-117">Downloading the .NET runtime, the app, and the app's dependencies.</span></span>
* <span data-ttu-id="679a8-118">La inicialización del tiempo de ejecución para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="679a8-118">Initialization of the runtime to run the app.</span></span>

<span data-ttu-id="679a8-119">El modelo de hospedaje de Blazor WebAssembly ofrece varias ventajas:</span><span class="sxs-lookup"><span data-stu-id="679a8-119">The Blazor WebAssembly hosting model offers several benefits:</span></span>

* <span data-ttu-id="679a8-120">No hay ninguna dependencia del lado servidor .NET.</span><span class="sxs-lookup"><span data-stu-id="679a8-120">There's no .NET server-side dependency.</span></span> <span data-ttu-id="679a8-121">La aplicación funciona totalmente después de descargarla en el cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-121">The app is fully functioning after it's downloaded to the client.</span></span>
* <span data-ttu-id="679a8-122">Los recursos y capacidades del cliente se aprovechan completamente.</span><span class="sxs-lookup"><span data-stu-id="679a8-122">Client resources and capabilities are fully leveraged.</span></span>
* <span data-ttu-id="679a8-123">El trabajo se descarga del servidor al cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-123">Work is offloaded from the server to the client.</span></span>
* <span data-ttu-id="679a8-124">No es necesario un servidor web ASP.NET Core para hospedar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="679a8-124">An ASP.NET Core web server isn't required to host the app.</span></span> <span data-ttu-id="679a8-125">Los escenarios de implementación sin servidor son posibles, como dar servicio a la aplicación desde una instancia de Content Delivery Network (CDN).</span><span class="sxs-lookup"><span data-stu-id="679a8-125">Serverless deployment scenarios are possible, such as serving the app from a Content Delivery Network (CDN).</span></span>

<span data-ttu-id="679a8-126">El modelo de hospedaje de Blazor WebAssembly tiene las limitaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="679a8-126">The Blazor WebAssembly hosting model has the following limitations:</span></span>

* <span data-ttu-id="679a8-127">La aplicación está restringida a las capacidades del explorador.</span><span class="sxs-lookup"><span data-stu-id="679a8-127">The app is restricted to the capabilities of the browser.</span></span>
* <span data-ttu-id="679a8-128">Se necesita hardware y software del cliente compatible (por ejemplo, compatibilidad con WebAssembly).</span><span class="sxs-lookup"><span data-stu-id="679a8-128">Capable client hardware and software (for example, WebAssembly support) is required.</span></span>
* <span data-ttu-id="679a8-129">El tamaño de descarga es mayor y las aplicaciones tardan más tiempo en cargarse.</span><span class="sxs-lookup"><span data-stu-id="679a8-129">Download size is larger, and apps take longer to load.</span></span>
* <span data-ttu-id="679a8-130">La compatibilidad con las herramientas y el tiempo de ejecución de .NET está menos desarrollada.</span><span class="sxs-lookup"><span data-stu-id="679a8-130">.NET runtime and tooling support is less mature.</span></span> <span data-ttu-id="679a8-131">Por ejemplo, existen limitaciones en la compatibilidad y la depuración de [.NET Standard](/dotnet/standard/net-standard).</span><span class="sxs-lookup"><span data-stu-id="679a8-131">For example, limitations exist in [.NET Standard](/dotnet/standard/net-standard) support and debugging.</span></span>

<span data-ttu-id="679a8-132">Para crear una aplicación Blazor WebAssembly, consulte <xref:blazor/tooling>.</span><span class="sxs-lookup"><span data-stu-id="679a8-132">To create a Blazor WebAssembly app, see <xref:blazor/tooling>.</span></span>

<span data-ttu-id="679a8-133">El modelo de aplicación hospedada de Blazor admite los [contenedores de Docker](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span><span class="sxs-lookup"><span data-stu-id="679a8-133">The hosted Blazor app model supports [Docker containers](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span></span> <span data-ttu-id="679a8-134">A efectos de compatibilidad con Docker en Visual Studio, haga clic con el botón derecho en el proyecto `Server` de una solución Blazor WebAssembly hospedada y seleccione **Agregar** > **Compatibilidad con Docker**.</span><span class="sxs-lookup"><span data-stu-id="679a8-134">For Docker support in Visual Studio, right-click on the `Server` project of a hosted Blazor WebAssembly solution and select **Add** > **Docker Support**.</span></span>

## Blazor Server

<span data-ttu-id="679a8-135">Con el modelo de hospedaje de Blazor Server, la aplicación se ejecuta en el servidor desde una aplicación ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="679a8-135">With the Blazor Server hosting model, the app is executed on the server from within an ASP.NET Core app.</span></span> <span data-ttu-id="679a8-136">Las actualizaciones de la interfaz de usuario, el control de eventos y las llamadas de JavaScript se controlan mediante una conexión [SignalR](xref:signalr/introduction).</span><span class="sxs-lookup"><span data-stu-id="679a8-136">UI updates, event handling, and JavaScript calls are handled over a [SignalR](xref:signalr/introduction) connection.</span></span>

![El explorador interactúa con la aplicación (hospedada en una aplicación ASP.NET Core) en el servidor a través de una conexión SignalR.](hosting-models/_static/blazor-server.png)

<span data-ttu-id="679a8-138">La aplicación ASP.NET Core hace referencia a la clase `Startup` de la aplicación para agregar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="679a8-138">The ASP.NET Core app references the app's `Startup` class to add:</span></span>

* <span data-ttu-id="679a8-139">Servicios del lado servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-139">Server-side services.</span></span>
* <span data-ttu-id="679a8-140">La aplicación a la canalización de administración de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="679a8-140">The app to the request handling pipeline.</span></span>

<span data-ttu-id="679a8-141">En el cliente, el script `blazor.server.js` establece la conexión SignalR con el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-141">On the client, the `blazor.server.js` script establishes the SignalR connection with the server.</span></span> <span data-ttu-id="679a8-142">El script se sirve a la aplicación del lado cliente desde un recurso incrustado en el marco compartido de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="679a8-142">The script is served to the client-side app from an embedded resource in the ASP.NET Core shared framework.</span></span> <span data-ttu-id="679a8-143">La aplicación del lado cliente es responsable de conservar y restaurar el estado de la aplicación según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="679a8-143">The client-side app is responsible for persisting and restoring app state as required.</span></span> 

<span data-ttu-id="679a8-144">El modelo de hospedaje de Blazor Server ofrece varias ventajas:</span><span class="sxs-lookup"><span data-stu-id="679a8-144">The Blazor Server hosting model offers several benefits:</span></span>

* <span data-ttu-id="679a8-145">El tamaño de la descarga es bastante menor que una aplicación Blazor WebAssembly y la aplicación se carga mucho más rápido.</span><span class="sxs-lookup"><span data-stu-id="679a8-145">Download size is significantly smaller than a Blazor WebAssembly app, and the app loads much faster.</span></span>
* <span data-ttu-id="679a8-146">La aplicación aprovecha al máximo las capacidades del servidor, incluido el uso de cualquier API compatible con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="679a8-146">The app takes full advantage of server capabilities, including use of any .NET Core compatible APIs.</span></span>
* <span data-ttu-id="679a8-147">.NET Core en el servidor se usa para ejecutar la aplicación, por lo que las herramientas de .NET existentes, como la depuración, funcionan según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="679a8-147">.NET Core on the server is used to run the app, so existing .NET tooling, such as debugging, works as expected.</span></span>
* <span data-ttu-id="679a8-148">Se admiten clientes ligeros.</span><span class="sxs-lookup"><span data-stu-id="679a8-148">Thin clients are supported.</span></span> <span data-ttu-id="679a8-149">Por ejemplo, las aplicaciones Blazor Server funcionan con los exploradores que no admiten WebAssembly y en los dispositivos con restricción de recursos.</span><span class="sxs-lookup"><span data-stu-id="679a8-149">For example, Blazor Server apps work with browsers that don't support WebAssembly and on resource-constrained devices.</span></span>
* <span data-ttu-id="679a8-150">La base del código de la aplicación .NET/C#, incluido el código de componente de la aplicación, no se sirve a los clientes.</span><span class="sxs-lookup"><span data-stu-id="679a8-150">The app's .NET/C# code base, including the app's component code, isn't served to clients.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="679a8-151">Una aplicación Blazor Server se representa previamente en respuesta a la primera solicitud de cliente, que crea el estado de la interfaz de usuario en el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-151">A Blazor Server app prerenders in response to the first client request, which creates the UI state on the server.</span></span> <span data-ttu-id="679a8-152">Cuando el cliente intenta crear una conexión SignalR, **debe volver a conectarse al mismo servidor**.</span><span class="sxs-lookup"><span data-stu-id="679a8-152">When the client attempts to create a SignalR connection, **the client must reconnect to the same server**.</span></span> <span data-ttu-id="679a8-153">Las aplicaciones Blazor Server que usen más de un servidor back-end deben implementar *sesiones permanentes* para conexiones SignalR.</span><span class="sxs-lookup"><span data-stu-id="679a8-153">Blazor Server apps that use more than one backend server should implement *sticky sessions* for SignalR connections.</span></span> <span data-ttu-id="679a8-154">Para obtener más información, vea la sección [Conexión al servidor](#connection-to-the-server).</span><span class="sxs-lookup"><span data-stu-id="679a8-154">For more information, see the [Connection to the server](#connection-to-the-server) section.</span></span>

<span data-ttu-id="679a8-155">El modelo de hospedaje de Blazor Server tiene las limitaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="679a8-155">The Blazor Server hosting model has the following limitations:</span></span>

* <span data-ttu-id="679a8-156">Normalmente existe una mayor latencia.</span><span class="sxs-lookup"><span data-stu-id="679a8-156">Higher latency usually exists.</span></span> <span data-ttu-id="679a8-157">Cada interacción del usuario implica un salto de red.</span><span class="sxs-lookup"><span data-stu-id="679a8-157">Every user interaction involves a network hop.</span></span>
* <span data-ttu-id="679a8-158">No hay soporte técnico sin conexión.</span><span class="sxs-lookup"><span data-stu-id="679a8-158">There's no offline support.</span></span> <span data-ttu-id="679a8-159">Si se produce un error en la conexión del cliente, la aplicación deja de funcionar.</span><span class="sxs-lookup"><span data-stu-id="679a8-159">If the client connection fails, the app stops working.</span></span>
* <span data-ttu-id="679a8-160">En el caso de aplicaciones con muchos usuarios, la escalabilidad supone un reto.</span><span class="sxs-lookup"><span data-stu-id="679a8-160">Scalability is challenging for apps with many users.</span></span> <span data-ttu-id="679a8-161">El servidor debe administrar varias conexiones de cliente y controlar el estado del cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-161">The server must manage multiple client connections and handle client state.</span></span>
* <span data-ttu-id="679a8-162">Se necesita un servidor ASP.NET Core para atender la aplicación.</span><span class="sxs-lookup"><span data-stu-id="679a8-162">An ASP.NET Core server is required to serve the app.</span></span> <span data-ttu-id="679a8-163">Los escenarios de implementación sin servidor no son posibles, como dar servicio a la aplicación desde una instancia de Content Delivery Network (CDN).</span><span class="sxs-lookup"><span data-stu-id="679a8-163">Serverless deployment scenarios aren't possible, such as serving the app from a Content Delivery Network (CDN).</span></span>

<span data-ttu-id="679a8-164">Para crear una aplicación Blazor Server, consulte <xref:blazor/tooling>.</span><span class="sxs-lookup"><span data-stu-id="679a8-164">To create a Blazor Server app, see <xref:blazor/tooling>.</span></span>

<span data-ttu-id="679a8-165">El modelo de la aplicación Blazor Server admite los [contenedores de Docker](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span><span class="sxs-lookup"><span data-stu-id="679a8-165">The Blazor Server app model supports [Docker containers](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span></span> <span data-ttu-id="679a8-166">A efectos de compatibilidad con Docker en Visual Studio, haga clic con el botón derecho en el proyecto en Visual Studio y seleccione **Agregar** > **Compatibilidad con Docker**.</span><span class="sxs-lookup"><span data-stu-id="679a8-166">For Docker support in Visual Studio, right-click on the project in Visual Studio and select **Add** > **Docker Support**.</span></span>

### <a name="comparison-to-server-rendered-ui"></a><span data-ttu-id="679a8-167">Comparación con la interfaz de usuario representada por el servidor</span><span class="sxs-lookup"><span data-stu-id="679a8-167">Comparison to server-rendered UI</span></span>

<span data-ttu-id="679a8-168">Una forma de entender las aplicaciones Blazor Server es comprender cómo difieren de los modelos tradicionales para la representación de la interfaz de usuario de las aplicaciones de ASP.NET Core mediante vistas de Razor o Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="679a8-168">One way to understand Blazor Server apps is to understand how it differs from traditional models for rendering UI in ASP.NET Core apps using Razor views or Razor Pages.</span></span> <span data-ttu-id="679a8-169">Ambos modelos usan el [lenguaje Razor](xref:mvc/views/razor) para describir el contenido HTML, pero difieren bastante en *cómo* se representa el marcado.</span><span class="sxs-lookup"><span data-stu-id="679a8-169">Both models use the [Razor language](xref:mvc/views/razor) to describe HTML content for rendering, but they significantly differ in *how* markup is rendered.</span></span>

<span data-ttu-id="679a8-170">Cuando se representa una página de Razor o una vista, cada línea de código de Razor emite HTML en forma de texto.</span><span class="sxs-lookup"><span data-stu-id="679a8-170">When a Razor Page or view is rendered, every line of Razor code emits HTML in text form.</span></span> <span data-ttu-id="679a8-171">Después de la representación, el servidor desecha la instancia de la página o la vista, incluido cualquier estado que se haya producido.</span><span class="sxs-lookup"><span data-stu-id="679a8-171">After rendering, the server disposes of the page or view instance, including any state that was produced.</span></span> <span data-ttu-id="679a8-172">Cuando se produce otra solicitud para la página, por ejemplo, cuando se produce un error en la validación del servidor y se muestra el resumen de la validación, ocurre lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="679a8-172">When another request for the page occurs, for instance when server validation fails and the validation summary is displayed:</span></span>

* <span data-ttu-id="679a8-173">La página completa se vuelve a representar en texto HTML de nuevo.</span><span class="sxs-lookup"><span data-stu-id="679a8-173">The entire page is rerendered to HTML text again.</span></span>
* <span data-ttu-id="679a8-174">Se envía la página al cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-174">The page is sent to the client.</span></span>

<span data-ttu-id="679a8-175">Una aplicación Blazor se compone de elementos reutilizables de la interfaz de usuario denominados *componentes*.</span><span class="sxs-lookup"><span data-stu-id="679a8-175">A Blazor app is composed of reusable elements of UI called *components*.</span></span> <span data-ttu-id="679a8-176">Un componente contiene código de C#, marcado y otros componentes.</span><span class="sxs-lookup"><span data-stu-id="679a8-176">A component contains C# code, markup, and other components.</span></span> <span data-ttu-id="679a8-177">Cuando se representa un componente, Blazor genera un gráfico de los componentes incluidos de forma similar a un Document Object Model (DOM) HTML o XML.</span><span class="sxs-lookup"><span data-stu-id="679a8-177">When a component is rendered, Blazor produces a graph of the included components similar to an HTML or XML Document Object Model (DOM).</span></span> <span data-ttu-id="679a8-178">Este gráfico incluye el estado del componente contenido en propiedades y campos.</span><span class="sxs-lookup"><span data-stu-id="679a8-178">This graph includes component state held in properties and fields.</span></span> <span data-ttu-id="679a8-179">Blazor evalúa el gráfico de componentes para generar una representación binaria del marcado.</span><span class="sxs-lookup"><span data-stu-id="679a8-179">Blazor evaluates the component graph to produce a binary representation of the markup.</span></span> <span data-ttu-id="679a8-180">El formato binario puede ser lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="679a8-180">The binary format can be:</span></span>

* <span data-ttu-id="679a8-181">Se convierte en texto HTML (durante la representación previa&dagger;).</span><span class="sxs-lookup"><span data-stu-id="679a8-181">Turned into HTML text (during prerendering&dagger;).</span></span>
* <span data-ttu-id="679a8-182">Se usa para actualizar de forma eficaz el marcado durante la representación normal.</span><span class="sxs-lookup"><span data-stu-id="679a8-182">Used to efficiently update the markup during regular rendering.</span></span>

<span data-ttu-id="679a8-183">&dagger;*Representación previa*: El componente de Razor solicitado se compila en el servidor en HTML estático y se envía al cliente, donde se representa al usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-183">&dagger;*Prerendering*: The requested Razor component is compiled on the server into static HTML and sent to the client, where it's rendered to the user.</span></span> <span data-ttu-id="679a8-184">Una vez realizada la conexión entre el cliente y el servidor, los elementos estáticos del componente representados previamente se reemplazan por elementos interactivos.</span><span class="sxs-lookup"><span data-stu-id="679a8-184">After the connection is made between the client and the server, the component's static prerendered elements are replaced with interactive elements.</span></span> <span data-ttu-id="679a8-185">La representación previa hace que la aplicación tenga más capacidad de respuesta respecto al usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-185">Prerendering makes the app feel more responsive to the user.</span></span>

<span data-ttu-id="679a8-186">Una actualización de la interfaz de usuario en Blazor se desencadena mediante lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="679a8-186">A UI update in Blazor is triggered by:</span></span>

* <span data-ttu-id="679a8-187">Interacción del usuario, como la selección de un botón.</span><span class="sxs-lookup"><span data-stu-id="679a8-187">User interaction, such as selecting a button.</span></span>
* <span data-ttu-id="679a8-188">Desencadenadores de aplicaciones, como un temporizador.</span><span class="sxs-lookup"><span data-stu-id="679a8-188">App triggers, such as a timer.</span></span>

<span data-ttu-id="679a8-189">El gráfico de componentes se vuelve a representar y se calcula un valor *diff* (diferencia) de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-189">The component graph is rerendered, and a UI *diff* (difference) is calculated.</span></span> <span data-ttu-id="679a8-190">Esta diferencia es el conjunto más pequeño de ediciones DOM necesarias para actualizar la interfaz de usuario en el cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-190">This diff is the smallest set of DOM edits required to update the UI on the client.</span></span> <span data-ttu-id="679a8-191">La diferencia se envía al cliente en un formato binario y se aplica mediante el explorador.</span><span class="sxs-lookup"><span data-stu-id="679a8-191">The diff is sent to the client in a binary format and applied by the browser.</span></span>

<span data-ttu-id="679a8-192">Se desecha un componente después de que el usuario salga de él en el cliente.</span><span class="sxs-lookup"><span data-stu-id="679a8-192">A component is disposed after the user navigates away from it on the client.</span></span> <span data-ttu-id="679a8-193">Mientras que un usuario interactúa con un componente, el estado del componente (servicios, recursos) debe mantenerse en la memoria del servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-193">While a user is interacting with a component, the component's state (services, resources) must be held in the server's memory.</span></span> <span data-ttu-id="679a8-194">Dado que el servidor puede mantener el estado de muchos componentes simultáneamente, el agotamiento de la memoria es una preocupación que se debe abordar.</span><span class="sxs-lookup"><span data-stu-id="679a8-194">Because the state of many components might be maintained by the server concurrently, memory exhaustion is a concern that must be addressed.</span></span> <span data-ttu-id="679a8-195">Para obtener instrucciones sobre cómo crear una aplicación Blazor Server con el fin de garantizar el mejor uso de la memoria del servidor, vea <xref:blazor/security/server/threat-mitigation>.</span><span class="sxs-lookup"><span data-stu-id="679a8-195">For guidance on how to author a Blazor Server app to ensure the best use of server memory, see <xref:blazor/security/server/threat-mitigation>.</span></span>

### <a name="circuits"></a><span data-ttu-id="679a8-196">Circuitos</span><span class="sxs-lookup"><span data-stu-id="679a8-196">Circuits</span></span>

<span data-ttu-id="679a8-197">Una aplicación Blazor Server se basa en [ASP.NET Core SignalR](xref:signalr/introduction).</span><span class="sxs-lookup"><span data-stu-id="679a8-197">A Blazor Server app is built on top of [ASP.NET Core SignalR](xref:signalr/introduction).</span></span> <span data-ttu-id="679a8-198">Cada cliente se comunica con el servidor a través de una o varias conexiones SignalR denominadas *circuitos*.</span><span class="sxs-lookup"><span data-stu-id="679a8-198">Each client communicates to the server over one or more SignalR connections called a *circuit*.</span></span> <span data-ttu-id="679a8-199">Un circuito es la abstracción de Blazor en conexiones SignalR que pueden tolerar interrupciones de red temporales.</span><span class="sxs-lookup"><span data-stu-id="679a8-199">A circuit is Blazor's abstraction over SignalR connections that can tolerate temporary network interruptions.</span></span> <span data-ttu-id="679a8-200">Cuando un cliente Blazor ve que la conexión SignalR está desconectada, intenta volver a conectarse al servidor mediante una nueva conexión SignalR.</span><span class="sxs-lookup"><span data-stu-id="679a8-200">When a Blazor client sees that the SignalR connection is disconnected, it attempts to reconnect to the server using a new SignalR connection.</span></span>

<span data-ttu-id="679a8-201">Cada pantalla del explorador (pestaña del explorador o iframe) que está conectada a una aplicación Blazor Server usa una conexión SignalR.</span><span class="sxs-lookup"><span data-stu-id="679a8-201">Each browser screen (browser tab or iframe) that is connected to a Blazor Server app uses a SignalR connection.</span></span> <span data-ttu-id="679a8-202">Esta es otra diferencia importante en comparación con las aplicaciones típicas representadas por el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-202">This is yet another important distinction compared to typical server-rendered apps.</span></span> <span data-ttu-id="679a8-203">En una aplicación representada por el servidor, la apertura de la misma aplicación en varias pantallas del explorador normalmente no se traduce en demandas adicionales de recursos en el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-203">In a server-rendered app, opening the same app in multiple browser screens typically doesn't translate into additional resource demands on the server.</span></span> <span data-ttu-id="679a8-204">En una aplicación Blazor Server, cada pantalla del explorador requiere un circuito e instancias independientes del estado del componente que administra el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-204">In a Blazor Server app, each browser screen requires a separate circuit and separate instances of component state to be managed by the server.</span></span>

<span data-ttu-id="679a8-205">Blazor considera el cierre de una pestaña del explorador o la navegación a una dirección URL externa una terminación *correcta*.</span><span class="sxs-lookup"><span data-stu-id="679a8-205">Blazor considers closing a browser tab or navigating to an external URL a *graceful* termination.</span></span> <span data-ttu-id="679a8-206">En el caso de una terminación correcta, el circuito y los recursos asociados se liberan inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="679a8-206">In the event of a graceful termination, the circuit and associated resources are immediately released.</span></span> <span data-ttu-id="679a8-207">Un cliente también puede desconectarse de manera no correcta, por ejemplo, debido a una interrupción en la red.</span><span class="sxs-lookup"><span data-stu-id="679a8-207">A client may also disconnect non-gracefully, for instance due to a network interruption.</span></span> <span data-ttu-id="679a8-208">Blazor Server almacena los circuitos desconectados durante un intervalo configurable para permitir que el cliente vuelva a conectarse.</span><span class="sxs-lookup"><span data-stu-id="679a8-208">Blazor Server stores disconnected circuits for a configurable interval to allow the client to reconnect.</span></span>

<span data-ttu-id="679a8-209">Blazor Server permite que el código defina un *controlador de circuito*, que permite ejecutar el código en los cambios realizados en el estado del circuito de un usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-209">Blazor Server allows code to define a *circuit handler*, which allows running code on changes to the state of a user's circuit.</span></span> <span data-ttu-id="679a8-210">Para obtener más información, vea <xref:blazor/advanced-scenarios#blazor-server-circuit-handler>.</span><span class="sxs-lookup"><span data-stu-id="679a8-210">For more information, see <xref:blazor/advanced-scenarios#blazor-server-circuit-handler>.</span></span>

### <a name="ui-latency"></a><span data-ttu-id="679a8-211">Latencia de la interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="679a8-211">UI Latency</span></span>

<span data-ttu-id="679a8-212">La latencia de la interfaz de usuario es el tiempo que tarda desde una acción iniciada hasta el momento en que esta interfaz de usuario se actualiza.</span><span class="sxs-lookup"><span data-stu-id="679a8-212">UI latency is the time it takes from an initiated action to the time the UI is updated.</span></span> <span data-ttu-id="679a8-213">Los valores más pequeños de la latencia de la interfaz de usuario son imprescindibles para que una aplicación pueda responder a un usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-213">Smaller values for UI latency are imperative for an app to feel responsive to a user.</span></span> <span data-ttu-id="679a8-214">En una aplicación Blazor Server, cada acción se envía al servidor, se procesa y se devuelve una diferencia de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-214">In a Blazor Server app, each action is sent to the server, processed, and a UI diff is sent back.</span></span> <span data-ttu-id="679a8-215">Por lo tanto, la latencia de la interfaz de usuario es la suma de la latencia de red y la del servidor en el procesamiento de la acción.</span><span class="sxs-lookup"><span data-stu-id="679a8-215">Consequently, UI latency is the sum of network latency and the server latency in processing the action.</span></span>

<span data-ttu-id="679a8-216">En el caso de una aplicación empresarial que esté limitada a una red corporativa privada, los efectos en las percepciones del usuario sobre la latencia debido a la latencia de red suelen ser imperceptibles.</span><span class="sxs-lookup"><span data-stu-id="679a8-216">For a business app that's limited to a private corporate network, the effect on user perceptions of latency due to network latency are usually imperceptible.</span></span> <span data-ttu-id="679a8-217">En el caso de una aplicación implementada a través de Internet, es posible que los usuarios perciban la latencia, especialmente si los usuarios están ampliamente distribuidos geográficamente.</span><span class="sxs-lookup"><span data-stu-id="679a8-217">For an app deployed over the Internet, latency may become noticeable to users, particularly if users are widely distributed geographically.</span></span>

<span data-ttu-id="679a8-218">El uso de memoria también puede contribuir a la latencia de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="679a8-218">Memory usage can also contribute to app latency.</span></span> <span data-ttu-id="679a8-219">El aumento del uso de memoria tiene como resultado la recolección frecuente de elementos no utilizados o la paginación de memoria en el disco. Ambas consecuencias degradan el rendimiento de la aplicación y, por lo tanto, aumentan la latencia de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="679a8-219">Increased memory usage results in frequent garbage collection or paging memory to disk, both of which degrade app performance and consequently increase UI latency.</span></span>

<span data-ttu-id="679a8-220">Las aplicaciones Blazor Server deben optimizarse para minimizar la latencia de la interfaz de usuario mediante la reducción de la latencia de red y el uso de memoria.</span><span class="sxs-lookup"><span data-stu-id="679a8-220">Blazor Server apps should be optimized to minimize UI latency by reducing network latency and memory usage.</span></span> <span data-ttu-id="679a8-221">Para obtener información acerca de cómo medir la latencia de red, vea <xref:blazor/host-and-deploy/server#measure-network-latency>.</span><span class="sxs-lookup"><span data-stu-id="679a8-221">For an approach to measuring network latency, see <xref:blazor/host-and-deploy/server#measure-network-latency>.</span></span> <span data-ttu-id="679a8-222">Para obtener más información sobre SignalR y Blazor, vea lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="679a8-222">For more information on SignalR and Blazor, see:</span></span>

* <xref:blazor/host-and-deploy/server>
* <xref:blazor/security/server/threat-mitigation>

### <a name="connection-to-the-server"></a><span data-ttu-id="679a8-223">Conexión al servidor</span><span class="sxs-lookup"><span data-stu-id="679a8-223">Connection to the server</span></span>

<span data-ttu-id="679a8-224">Las aplicaciones Blazor Server requieren una conexión SignalR activa al servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-224">Blazor Server apps require an active SignalR connection to the server.</span></span> <span data-ttu-id="679a8-225">Si se pierde la conexión, la aplicación intenta volver a conectarse al servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-225">If the connection is lost, the app attempts to reconnect to the server.</span></span> <span data-ttu-id="679a8-226">Siempre que el estado del cliente todavía esté en la memoria, la sesión del cliente se reanudará sin perder el estado.</span><span class="sxs-lookup"><span data-stu-id="679a8-226">As long as the client's state remains in the server's memory, the client session resumes without losing state.</span></span>

<span data-ttu-id="679a8-227">Una aplicación Blazor Server se representa previamente en respuesta a la primera solicitud de cliente, que crea el estado de la interfaz de usuario en el servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-227">A Blazor Server app prerenders in response to the first client request, which creates the UI state on the server.</span></span> <span data-ttu-id="679a8-228">Cuando el cliente intenta crear una conexión SignalR, este debe volver a conectarse al mismo servidor.</span><span class="sxs-lookup"><span data-stu-id="679a8-228">When the client attempts to create a SignalR connection, the client must reconnect to the same server.</span></span> <span data-ttu-id="679a8-229">Las aplicaciones Blazor Server que usen más de un servidor back-end deben implementar *sesiones permanentes* para conexiones SignalR.</span><span class="sxs-lookup"><span data-stu-id="679a8-229">Blazor Server apps that use more than one backend server should implement *sticky sessions* for SignalR connections.</span></span>

<span data-ttu-id="679a8-230">Se recomienda usar [Azure SignalR Service](/azure/azure-signalr) para las aplicaciones Blazor Server.</span><span class="sxs-lookup"><span data-stu-id="679a8-230">We recommend using the [Azure SignalR Service](/azure/azure-signalr) for Blazor Server apps.</span></span> <span data-ttu-id="679a8-231">El servicio permite el escalado vertical de una aplicación Blazor Server a un gran número de conexiones SignalR simultáneas.</span><span class="sxs-lookup"><span data-stu-id="679a8-231">The service allows for scaling up a Blazor Server app to a large number of concurrent SignalR connections.</span></span> <span data-ttu-id="679a8-232">Las sesiones permanentes están habilitadas para el Servicio SignalR de Azure estableciendo la opción `ServerStickyMode` del servicio o el valor de configuración en `Required`.</span><span class="sxs-lookup"><span data-stu-id="679a8-232">Sticky sessions are enabled for the Azure SignalR Service by setting the service's `ServerStickyMode` option or configuration value to `Required`.</span></span> <span data-ttu-id="679a8-233">Para obtener más información, vea <xref:blazor/host-and-deploy/server#signalr-configuration>.</span><span class="sxs-lookup"><span data-stu-id="679a8-233">For more information, see <xref:blazor/host-and-deploy/server#signalr-configuration>.</span></span>

<span data-ttu-id="679a8-234">Cuando se usa IIS, se habilitan sesiones temporales con el módulo *Enrutamiento de solicitud de aplicaciones*.</span><span class="sxs-lookup"><span data-stu-id="679a8-234">When using IIS, sticky sessions are enabled with *Application Request Routing*.</span></span> <span data-ttu-id="679a8-235">Para más información, vea [Equilibrio de carga HTTP mediante el enrutamiento de solicitud de aplicaciones](/iis/extensions/configuring-application-request-routing-arr/http-load-balancing-using-application-request-routing).</span><span class="sxs-lookup"><span data-stu-id="679a8-235">For more information, see [HTTP Load Balancing using Application Request Routing](/iis/extensions/configuring-application-request-routing-arr/http-load-balancing-using-application-request-routing).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="679a8-236">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="679a8-236">Additional resources</span></span>

* <xref:blazor/tooling>
* <xref:signalr/introduction>
* <xref:blazor/fundamentals/additional-scenarios>
* <xref:tutorials/signalr-blazor-webassembly>
